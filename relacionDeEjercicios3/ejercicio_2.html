<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Factura en HTML</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f4f4f9;
    }

    .factura {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px 30px;
      max-width: 700px;
      margin: auto;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .seccion {
      margin-bottom: 20px;
    }

    .seccion h3 {
      color: #444;
      border-bottom: 2px solid #ddd;
      padding-bottom: 5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      padding: 8px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background: #eee;
    }

    .total {
      text-align: right;
      font-weight: bold;
      font-size: 1.2em;
      margin-top: 10px;
    }

    .footer {
      text-align: center;
      color: #666;
      font-size: 0.9em;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="factura" id="factura"></div>

  <script>
    // Clase Empresa
    class Empresa {
      constructor(nombre, direccion, telefono, nif) {
        this.nombre = nombre;
        this.direccion = direccion;
        this.telefono = telefono;
        this.nif = nif;
      }
    }

    // Clase Cliente
    class Cliente {
      constructor(numCliente, dni, nombre, domicilio, cp, ciudad, provincia) {
        this.numCliente = numCliente;
        this.dni = dni;
        this.nombre = nombre;
        this.domicilio = domicilio;
        this.cp = cp;
        this.ciudad = ciudad;
        this.provincia = provincia;
      }
    }

    // Clase Producto
    class Producto {
      constructor(descripcion, precio, cantidad) {
        this.descripcion = descripcion;
        this.precio = precio;
        this.cantidad = cantidad;
      }

      getImporte() {
        return this.precio * this.cantidad;
      }
    }

    // Clase base DatosFactura
    class DatosFactura {
      constructor(empresa, cliente, productos) {
        this.empresa = empresa;
        this.cliente = cliente;
        this.productos = productos;
        this.importeTotal = 0;
      }
    }

    // Clase Factura (hereda de DatosFactura)
    class Factura extends DatosFactura {
      constructor(empresa, cliente, productos, formaPago) {
        super(empresa, cliente, productos);
        this.formaPago = formaPago;
      }

      calcularTotal() {
        this.importeTotal = this.productos.reduce(
          (total, producto) => total + producto.getImporte(),
          0
        );
      }

      mostrarFactura() {
        const contenedor = document.getElementById("factura");

        let productosHTML = this.productos
          .map(
            (p, i) => `
              <tr>
                <td>${i + 1}</td>
                <td>${p.descripcion}</td>
                <td>${p.cantidad}</td>
                <td>${p.precio.toFixed(2)} ‚Ç¨</td>
                <td>${p.getImporte().toFixed(2)} ‚Ç¨</td>
              </tr>
            `
          )
          .join("");

        contenedor.innerHTML = `
          <h1>Factura</h1>

          <div class="seccion">
            <h3>Empresa</h3>
            <p><strong>${this.empresa.nombre}</strong></p>
            <p>${this.empresa.direccion}</p>
            <p>Tel: ${this.empresa.telefono}</p>
            <p>NIF: ${this.empresa.nif}</p>
          </div>

          <div class="seccion">
            <h3>Cliente</h3>
            <p><strong>${this.cliente.nombre}</strong></p>
            <p>DNI: ${this.cliente.dni}</p>
            <p>${this.cliente.domicilio}</p>
            <p>${this.cliente.cp}, ${this.cliente.ciudad}, ${this.cliente.provincia}</p>
          </div>

          <div class="seccion">
            <h3>Productos</h3>
            <table>
              <thead>
                <tr>
                  <th>#</th>
                  <th>Descripci√≥n</th>
                  <th>Cantidad</th>
                  <th>Precio</th>
                  <th>Importe</th>
                </tr>
              </thead>
              <tbody>
                ${productosHTML}
              </tbody>
            </table>
          </div>

          <p class="total">Total: ${this.importeTotal.toFixed(2)} ‚Ç¨</p>
          <p><strong>Forma de pago:</strong> ${this.formaPago}</p>

          <div class="footer">
            <p>Gracias por su compra üíº</p>
          </div>
        `;
      }
    }

    // ======= Datos de ejemplo =======
    const empresa = new Empresa(
      "Tech Solutions S.L.",
      "Calle Mayor 123, Madrid",
      "912345678",
      "B12345678"
    );

    const cliente = new Cliente(
      1001,
      "12345678A",
      "Carlos P√©rez",
      "Av. Andaluc√≠a 45",
      "28031",
      "Madrid",
      "Madrid"
    );

    const productos = [
      new Producto("Monitor 27''", 220.5, 2),
      new Producto("Teclado mec√°nico", 75.99, 1),
      new Producto("Rat√≥n inal√°mbrico", 35.0, 3),
    ];

    const factura = new Factura(
      empresa,
      cliente,
      productos,
      "Transferencia bancaria"
    );

    factura.calcularTotal();
    factura.mostrarFactura();
  </script>
</body>
</html>
